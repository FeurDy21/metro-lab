   <style type="text/css">
     #addTable a,#addTable button{box-shadow: 45px 45px 45px 7777; border-radius: 8px/6px;}
   </style>
      <div class="container-fluid">
        <div class="row">
        <div class="col-md-5">
        <h2 style="margin-lef:60px; margin-top:-34px;"><span id="title">METROLEB ingenieurs  </span> <a class="nav-link d-inline-flex align-items-center" href="<?php echo $this->baseUrl(); ?>/setting/admin/list">
              <span class="fa fa-refresh" aria-hidden="true"></span>
          </a></h2>
        
         <h4>Les utilisateurs du systeme</h4>
        </div> 
        
        <div class="col-md-7">
         <table id="addTable" style="float:left; margin-top:-40px;" >
         <tr> <td> <a  href="#" class="btn btn-danger newAdmin btn-sm">Ajouter  nouveau</a> </td>
          <td> <button  class="btn btn-primary equipement btn-sm">Ajouter Equipement  </button></td>
       <td> <button  class="btn btn-success client btn-sm"> Ajouter client</button></td>
       <td> <button  class="btn btn-info partenaire btn-sm">Ajouter partenaire</button></td>
         </tr>
         </table>
        </div>
       </div>
      </div>

      <div class="row">
         <div class="col-md-6 ">
      
      <div class="table-responsive5">
      
        <table  class="table tablesorter mb-12 table-bordered" id="example4" border="">
          <caption>
            <!--on peut ecrire dans ce manchin-->
          
          </caption>
          <thead class="cf">
            <tr>
              <th   class="header text-center" width="35%">Utilisateur</th>
              <th  class="header text-center">Login</th>
              <th class="header">Role</th>
              
              <th scope="col"  class="header text-center" width="20%"  sytle="align:center;">Actions</th>
            </tr>
          </thead>
          <tbody>
                
            <?php foreach($this->users as $u): ?>
            <tr>
              <td class="align-middle" ><?php echo $u['ADMINISTRATEUR'];?></td>
              <td class="align-middle"  ><?php echo $u['LOGIN'];?></td>
              <td class="align-middle" > <?php echo $u['groupe'];?></td>
              <td class="align-middle">
                <a th:href=""  class="btn btn-sm btn-danger update" id="<?php echo $u['ID_ADMIN'];?>"><span class="fa fa-pencil ml-1" aria-hidden="true"></span></a>
                <a onclick="return confirm('voulez vous supprimer cet utilisateur ?');"   class="btn btn-sm btn-primary " ><span class="fa fa-trash ml-1" aria-hidden="true"></span></a>
              </td>
            </tr>
            <?php endforeach; ?>
            
          </tbody>
        </table>
        </div>
         </div>
         


    <div  class="col-md-6" >
          

      <div class="col-md-12">
          <h3 id="search" class="text-success">Gérer les élements suivants:</h3>
          <ul class="nav nav-tabs">
            <li class="nav-item"><a class="nav-link active" href="#equipements" data-toggle="tab">Equipements</a></li>
            <li class="nav-item"><a class="nav-link" href="#type" data-toggle="tab">Types équipement</a></li>
            <li class="nav-item"><a class="nav-link" href="#client" data-toggle="tab">Clients</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="equipements">
                <div class="row">
                  <div class="form-group col-12 col-lg-12">
                    
                    <div class="table-responsive5">
      
        <table  class="table tablesorter mb-12 table-bordered" id="example3" border="">
          <caption>
            <!--on peut ecrire dans ce manchin-->
          
          </caption>
          <thead class="cf">
            <tr>
              
             
              <th  class="header text-center">Login</th>
              <th class="header">Role</th>
              
              <th scope="col"  class="header text-center" width="20%"  sytle="align:center;">Actions</th>
            </tr>
          </thead>
          <tbody>
                  
          
            
            <?php foreach($this->users as $u): ?>
            <tr>
              
              <td class="align-middle"  ><?php echo $u['LOGIN'];?></td>
              <td class="align-middle" > <?php echo $u['groupe'];?></td>
              
              
              <td class="align-middle">
              
                <a th:href=""  class="btn btn-sm btn-danger update" id="<?php echo $u['ID_ADMIN'];?>"><span class="fa fa-pencil ml-1" aria-hidden="true"></span></a>
               
              </td>
            </tr>
            <?php endforeach; ?>
            
          </tbody>
        </table>
        </div>
            </div>
          </div>

                
            </div>


            <div class="tab-pane" id="type">
              
        <div class="table-responsive5">
      
        <table  class="table tablesorter mb-12 table-bordered" id="example2" border="">
          <caption>
            <!--on peut ecrire dans ce manchin-->
          
          </caption>
          <thead class="cf">
            <tr>
              <th  class="header text-center">Login</th>
              <th class="header">Role</th>
              
              <th scope="col"  class="header text-center" width="20%"  sytle="align:center;">Actions</th>
            </tr>
          </thead>
          <tbody>
                  
          
            
            <?php foreach($this->users as $u): ?>
            <tr>
              
              <td class="align-middle"  ><?php echo $u['LOGIN'];?></td>
              <td class="align-middle" > <?php echo $u['groupe'];?></td>
              
              
              <td class="align-middle">
              
                <a th:href=""  class="btn btn-sm btn-danger update" id="<?php echo $u['ID_ADMIN'];?>"><span class="fa fa-pencil ml-1" aria-hidden="true"></span></a>
               
              </td>
            </tr>
            <?php endforeach; ?>
            
          </tbody>
        </table>
        </div>


            </div>


            <div class="tab-pane" id="client">
              
              <div class="table-responsive5">
      
        <table  class="table tablesorter mb-12 table-bordered" id="example1" border="">
          <caption>
            <!--on peut ecrire dans ce manchin-->
          
          </caption>
          <thead class="cf">
            <tr>
              <th  class="header text-center">Utilisateur</th>
              <th  class="header text-center">Login</th>
              <th class="header">Role</th>
              
              <th scope="col"  class="header text-center" width="20%"  sytle="align:center;">Actions</th>
            </tr>
          </thead>
          <tbody>
                  
          
            
            <?php foreach($this->users as $u): ?>
            <tr>
                <td class="align-middle"  ><?php echo $u['ADMINISTRATEUR'];?></td>
              <td class="align-middle"  ><?php echo $u['LOGIN'];?></td>
              <td class="align-middle" > <?php echo $u['groupe'];?></td>
              
              
              <td class="align-middle">
              
                <a th:href=""  class="btn btn-sm btn-danger update" id="<?php echo $u['ID_ADMIN'];?>"><span class="fa fa-pencil ml-1" aria-hidden="true"></span></a>
               
              </td>
            </tr>
            <?php endforeach; ?>
            
          </tbody>
        </table>
        </div>

            </div>
          </div>
        </div>

              </div>
              
         </div>
        

        <!-- Modal -->
      <div class="modal fade" id="clientModal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h2 class="modal-title h4" id="myModalLabel">enregistrement de client</h2>
                <!-- Boosted mod: using visually hidden text instead of aria-label -->
                <button type="button" class="close" data-dismiss="modal">
                  <span class="sr-only">Close confirmation modal</span>
                </button>
              </div>
              <div class="modal-body">
                 <span class="message"></span>
                <p>
                  <form class="row"  id="clientForm"  accept-charset="utf-8">
                    <div class="col-16 col-lg-6">
                  <div class="form-group ">
                    <label for="PostUser" class="is-required">Nom de l'entreprise</label>
                    <input name="entreprise" class="form-control entreprise" maxlength="255" type="text"     aria-required="true" title="autor is empty"/>
                    <span id="erreur_entreprise"></span>
                 </div>
                </div>

                <div class="col-16 col-lg-6">
                  <div class="form-group">
                    <label for="mail" class="is-required">Mail</label>
                    <input name="mail" class="form-control mail" maxlength="255" type="mail"    aria-required="true" title="autor is empty"/>
                    <span id="erreur_mail"></span>
                 </div>
                </div>

                <div class="col-16 col-lg-6">
                  <div class="form-group ">
                    <label for="PostUser" class="is-required">telephone</label>
                    <input name="tel" class="form-control tel" maxlength="255" type="text"    aria-required="true" title="autor is empty"/>
                    <span id="erreur_tel"></span>
                 </div>
                </div>
                  
                 <div class="col-16 col-lg-6">
                  <div class="form-group ">
                    <label for="PostUser" class="is-required">Ville</label>
                    <input name="ville" class="form-control ville" maxlength="255" type="text"     aria-required="true" title="autor is empty"/>
                    <span id="erreur_ville"></span>
                 </div>
                </div>

                 <div class="col-12 col-lg-12">
                  <div class="form-group ">
                    <label for="PostUser" class="is-required">Pays</label>
                    <select name="pays" class="form-control pays" maxlength="255" type="text"     aria-required="true" title="autor is empty">
                       <option value="Côte d'Ivoire">côte d'ivoire</option>
                       <option value="Ghana">Ghana</option>
                        <option value="Guinée">Guinée</option>
                         <option value="Ghana">Burkina</option>
                    </select>
                    <span id="erreur_pays"></span>
                 </div>
                </div>

                  <div class="modal-footer">
                   <a href="#"  class="btn btn-primary  submitclient" > Ajouter</a>
                  </div>
                  </form>
                </p>

              </div>
              
            </div>
          </div>
        </div>
     
   <!-- Equipement -->
        <div class="modal fade" id="equipementModal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h2 class="modal-title h4" id="myModalLabel">Enregistrer un équipement</h2>
                <!-- Boosted mod: using visually hidden text instead of aria-label -->
                <button type="button" class="close" data-dismiss="modal">
                  <span class="sr-only">Close confirmation modal</span>
                </button>
              </div>
              <div class="modal-body">
                <span class="message"></span>
                <div class="col-md-12">
          <ul class="nav nav-tabs">
            <li class="nav-item"><a class="nav-link openEquipement active" href="#addEquipements" data-toggle="tab">Equipements</a></li>
            <li class="nav-item"><a class="nav-link openType" href="#addType" data-toggle="tab">Types équipement</a></li>
          </ul>

          <div class="tab-content">
            <div class="tab-pane active" id="addEquipements">
                <div class="row">
                  <div class="form-group col-12 col-lg-12">
                    
                  <form class="row" id="equipementForm" accept-charset="utf-8">
                    <div class="col-12 col-lg-12">
                  <div class="form-group">
                    <label for="PostUser" class="is-required">
                     Nom de l'équipement 
                    </label>
                    <input name="equipement" required="required" class="form-control equipement" maxlength="255" type="text"   aria-required="true" title="autor is empty"/>
                    <span id="erreur_equipement"></span>
                 </div>
                </div >
                 <div class="col-12 col-lg-12">
                    <div class="row">
                      <div class=" form-group col-11">
                    <label for="PostUser" class="is-required">
                      Type d'équipement
                    </label>
                    <select name="type-equipement" required="required" class="form-control type_equipement" maxlength="255" type="text"   aria-required="true" title="autor is empty">
                         <option class="" value="" >---select---</option>
                    <?php foreach($this->types as $val):?>
                       <option class="" value="<?php echo($val['id_type']);?>" ><?php echo($val['libelle_type']);?></option>
                    <?php endforeach; ?>
                    </select>
                    <span id="erreur_type-equipement"></span>
                 </div>
                 <a  href="#" class="fa fa-refresh rafrechir-type col-1" style="margin-top:6%; font-size: 1.6em;" ></a>
                 </div>
                </div>

                  <div class="col-lg-2">
                    
                   <a href="#" class="btn btn-primary"  name="submit" id="equipementButton"> Ajouter </a> 
                  
                  </div>
                  </form>
                
               </div>
               </div>
                
            </div>


            <div class="tab-pane" id="addType">
               <div class="row">
                  <div class="form-group col-12 col-lg-12">

                  <form class="row" id="TypeForm" accept-charset="utf-8">
                    <div class="col-9 col-lg-9">
                  <div class="form-group ">
                    <label for="PostUser" class="is-required col-lg-5">Type equipement</label>
                    <input name="type_equipement" required="required" class="form-control type_equipement" maxlength="255" type="text"    aria-required="true" title="autor is empty"/>
                    
                    <span id="erreur_type_equipement"></span>
                 </div>
                </div>

                  <div class=" col-lg-2" style="margin-top: 4%;"  >
                  <a href="#" class="btn btn-primary  submitetype" name="submit"> Ajouter</a>
                  </div>
                  </form>
                </div>            
             </div>

            </div>            
          </div>
        </div>

              </div>
              
            </div>
          </div>
        </div>


       <!-- Formulaire d'ajout d'un partenaire -->
        <div class="modal fade" id="partenaireModal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h2 class="modal-title h4" id="myModalLabel">Enregistrez vos partenaires</h2>
                <!-- Boosted mod: using visually hidden text instead of aria-label -->
                <button type="button" class="close" data-dismiss="modal">
                  <span class="sr-only">Close confirmation modal</span>
                </button>
              </div>
              <div class="modal-body">
                <p>
                  <form class="row"  id="addpartenaire"  accept-charset="utf-8">
                    <div class="col-12 col-lg-12">
                  <div class="form-group">
                    <label for="PostUser" class="is-required">Nom de l'entréprise</label>
                    <input name="" class="form-control entreprise" maxlength="255" type="text"   aria-required="true" title="autor is empty"/>
                    <span id="erreur_entreprise"></span>
                 </div>
                </div>

                 <div class="col-12 col-lg-12">
                  <div class="form-group">
                    <label for="" class="is-required">Logo</label>
                    <input name="logo" class="form-control addfile" maxlength="255" type="file"    aria-required="true" title="autor is empty"/>
                    <span id="erreur_"></span>
                 </div>
                </div>
                  

                  <div class="modal-footer">
                   <a  href="#" class="btn btn-primary  submitpartenaires" name="submit" > Ajouter</a>
                  </div>
                  </form>
                </p>

              </div>
              
            </div>
          </div>
        </div>
     
    
    
    
     <div class="modal fade" id="addModal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h2 class="modal-title h4" id="myModalLabel">  message</h2>
                <!-- Boosted mod: using visually hidden text instead of aria-label -->
                <button type="button" class="close" data-dismiss="modal">
                  <span class="sr-only">Close confirmation modal</span>
                </button>
              </div>
              <div class="modal-body">
               
              
            </div>
          </div>
        </div>
         </div>
    
    
        <!-- fin modal -->
        <!-- Nav tabs A-->
   
        <!-- fin nav tabs A -->
      </div>
   
    <!--/.container-->
    
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
   
    <script src="<?php echo $this->baseUrl(); ?>/private/boosted/js/boosted.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.1/js/jquery.tablesorter.min.js" integrity="sha384-QnFIXbEfAgO7z63b/aNzTSdSNLoNiNX/mk/Ok+NpUNMnvriWLo5cOtB0OUCAdKNu" crossorigin="anonymous"></script>
   <script src="<?php echo $this->baseUrl(); ?>/private/boosted/material/material.min.js"></script>
  <!-- Data Table -->
  <script src="<?php echo $this->baseUrl(); ?>/private/boosted/datatables/jquery.dataTables.min.js"></script>
  <script src="<?php echo $this->baseUrl(); ?>/private/boosted/datatables/plugins/bootstrap/dataTables.bootstrap4.min.js"></script>
  <script src="<?php echo $this->baseUrl(); ?>/private/boosted/datatables/export/dataTables.buttons.min.js"></script>
  <script src="<?php echo $this->baseUrl(); ?>/private/boosted/datatables/export/buttons.flash.min.js"></script>
  <script src="<?php echo $this->baseUrl(); ?>/private/boosted/datatables/export/jszip.min.js"></script>
  <script src="<?php echo $this->baseUrl(); ?>/private/boosted/datatables/export/pdfmake.min.js"></script>
  <script src="<?php echo $this->baseUrl(); ?>/private/boosted/datatables/export/vfs_fonts.js"></script>
  <script src="<?php echo $this->baseUrl(); ?>/private/boosted/datatables/export/buttons.html5.min.js"></script>
  <script src="<?php echo $this->baseUrl(); ?>/private/boosted/datatables/export/buttons.print.min.js"></script>
  <script src="<?php echo $this->baseUrl(); ?>/private/boosted/table_data.js" ></script>

    <script>window.jQuery.tablesorter || document.write('<script src="/docs/4.4/assets/js/vendor/jquery.tablesorter.min.js"><\/script>')</script>

    <script>$(document).ready(function() {
      $('.o-nav-local').prioritynav();

      $("#news-table").tablesorter({
        // pass the headers argument and assing a object
        headers: {
          // assign the secound column (we start counting zero)
          4: {
            // disable it by setting the property sorter to false
            sorter: false
          }
        },
        // manipulate the template string after is it created
        onRenderTemplate : function(i, t){
          // put a span arround the text
          return '<span>' + t + '</span>';
        }
      });

      $("#addTable").hide();
      
      $(document).on("click","#title", function(){
          $("#addTable").show();
      });
      
    $(document).on("click",".attribuer",function(){
      $("#confirm-dialog").modal("show");
    });

  
    $(document).on("click","table .equipement",function(){
      $("#equipementModal").modal("show");
    });
 
  $(document).on("click","table .client",function(){
      $("#clientModal").modal("show");
    });

 $(document).on("click","table .partenaire",function(){
      $("#partenaireModal").modal("show");
    });

  $(document).on("click","table .type-equipementeModal",function(){
      $("#type-equipementeModal").modal("show");
    });


 $(document).on("click",".update", function(){

   var id =$(this).attr('id');

      // DO POSTcontentType : "application/JSON",
                  $.ajax({
                  type : "POST",
                  
                  url :"<?php echo $this->baseUrl(); ?>/setting/admin/findbyid",
                  data : {id:id},
                  dataType : 'text',
                  success : function(result) {
                      
              if(result!=''){
                   $("#addModal #myModalLabel").text("Mise à jour des info de  l'utilisateur");
                   $("#addModal .modal-body").html(result);
                   $("#addModal").modal("show");
             } else{
                alert("une erreur s'est produite lors de l'enregistrement");
                           
                    //console.log(result);
                 } }
                });          
    });
     


 $(document).on("click",".submitetype", function(){
      // DO POSTcontentType : "application/JSON",
                  // DO POSTcontentType : "application/JSON",
      
         if($.trim($('#TypeForm .type_equipement').val())==''){
             erreur_groupe="Saisissez le type d'equipements dont il s'agit";
             $('#equipementModal .message').text(erreur_groupe);
             $('#equipementModal .message').css('color', 'orange');
              $('#TypeForm .type_equipement').css('border-color', 'red');
             return false;
         }else{
                erreur_groupe='';
              $('.equipementModal .message').text(erreur_groupe);
               $('#TypeForm .type_equipement').css('border-color', 'black');
             
         }
         
                  $.ajax({
                  type : "POST",
                  url :"<?php echo $this->baseUrl(); ?>/setting/admin/addtype",
                  data : $("#equipementModal #TypeForm").serialize(),
                  dataType : 'text',
                  success : function(result) {
                    if(result=="ok"){

                     $("#equipementModal .message").html('<span class="alert alert-success border-0 mb-0"><span class="alert-icon"><span class="sr-only">Success</span></span> type d\'équipement Enregistré</span>');
                 //$('.message').text("");
                 $('#equipementModal .message').css("font-size","1.2em");
                  $('#equipementModal .message .alert').css("text-align","center");
                     $('#equipementModal .message').css("color","green");
                    }else{
                  $("#equipementModal .message").html('<span class="alert alert-danger border-0 mb-0"><span class="alert-icon"><span class="sr-only">Failure</span></span>Echec</span>');
                      $('#equipementModal .message').css("color","red");
                      $('#equipementModal .message .alert').css("text-align","center");
                      $('#equipementModal .message').css("font-size","1.2em");
                     }
                   }
                });      
    });
     

     $(document).on("click","#equipementButton", function(){
      // cette fonction est prevue pour permetre d'enregistrer les equipements dont on prend la mesure,
      var maVar=0;
          if($.trim($('#equipementForm .equipement').val())==''){
             erreur_groupe="Saisissez le nom de l'équipement";
             $('#equipementModal #erreur_equipement').text(erreur_groupe);
             $('#equipementModal #erreur_equipement').css('color', 'orange');
              $('#equipementForm .equipement').css('border-color', 'red');
             maVar++;
         }else{
                erreur_groupe='';
              $('#equipementForm #erreur_equipement').text(erreur_groupe);
              $('#equipementForm .equipement').css('border-color', 'black');
             
         }

        if($.trim($('#equipementForm .type_equipement').val())==''){
             erreur_groupe="selectionnez le type d'équipement";
             $('#equipementModal #erreur_type-equipement').text(erreur_groupe);
             $('#equipementModal #erreur_type-equipement').css('color', 'orange');
              $('#equipementModal .type_equipement').css('border-color', 'red');
            maVar++;
         }else{
                erreur_groupe='';
              $('#equipementModal #erreur_type-equipement').text(erreur_groupe);
              $('#equipementForm .type_equipement').css('border-color', 'black');
             
         }

         if(maVar>0){ maVar=0; return false; }
        

                  // DO POSTcontentType : "application/JSON",
                  $.ajax({
                  type : "POST",
                  
                  url :"<?php echo $this->baseUrl(); ?>/setting/admin/addequipement",
                  data : $("#equipementModal #equipementForm").serialize(),
                  dataType : 'text',
                  success : function(result) {
                      
                    if(result=="ok"){
                     $("#equipementModal .message").html('<span class="alert alert-success border-0 mb-0"><span class="alert-icon"><span class="sr-only">Success</span></span> équipement Enregistré</span>');
                 //$('.message').text("");
                 $('#equipementModal .message').css("font-size","1.2em");
                  $('#equipementModal .message .alert').css("text-align","center");
                     $('#equipementModal .message').css("color","green");
                    }else{
                  $("#equipementModal .message").html('<span class="alert alert-danger border-0 mb-0"><span class="alert-icon"><span class="sr-only">Failure</span></span>Echec</span>');
                      $('#equipementModal .message').css("color","red");
                      $('#equipementModal .message .alert').css("text-align","center");
                      $('#equipementModal .message').css("font-size","1.2em");
                     }
                   }
                });

    });

$(document).on("click","#equipementModal .openType , #equipementModal .openEquipement",function(){
  //c'est une fonction qui va nous permettre d'effacer le le resultat losequ'on ouvre une nouvelle fenetre
   $("#equipementModal .message").text('');

});

     $(document).on("click",".submitclient", function(){
      // DO POSTcontentType : "application/JSON",

         var maVar=0;
          if($.trim($('#clientForm .entreprise').val())==''){
             erreur_groupe="Saisissez le nom de l'entreprise";
             $('#clientForm  #erreur_entreprise').text(erreur_groupe);
             $('#clientForm  #erreur_entreprise').css('color', 'orange');
              $('#clientForm  .entreprise').css('border-color', 'red');
             maVar++;
         }else{
                erreur_groupe='';
              $('#clientForm  #erreur_entreprise').text(erreur_groupe);
              $('#clientForm  .entreprise').css('border-color', 'black');
             
         }

        if($.trim($('#clientForm  .pays').val())==''){
             erreur_groupe="selectionnez le pays où se trouve l'entreprise";
             $('#clientForm  #erreur_pays').text(erreur_groupe);
             $('#clientForm  #erreur_pays').css('color', 'orange');
              $('#clientForm  .pays').css('border-color', 'red');
            maVar++;
         }else{
                erreur_groupe='';
              $('#clientForm  #erreur_pays').text(erreur_groupe);
              $('#clientForm  .pays').css('border-color', 'black');
             
         }

         if(maVar>0){ maVar=0; return false; }
        


                  $.ajax({
                  type : "POST",
                  url :"<?php echo $this->baseUrl(); ?>/setting/admin/addclient",
                  data : $("#clientForm").serialize(),
                  dataType : 'text',
                  success : function(result) {
                    alert(result);
             if(result=='ok'){
     
                     $("#clientModal .message").html('<span class="alert alert-success border-0 mb-0"><span class="alert-icon"><span class="sr-only">Success</span></span> Client Enregistré</span>');
                 //$('.message').text("");
                 $('#clientModal .message').css("font-size","1.2em");
                  $('#equipementModal .message .alert').css("text-align","center");
                     $('#equipementModal .message').css("color","green");
                    }else{
                  $("#clientModal .message").html('<span class="alert alert-danger border-0 mb-0"><span class="alert-icon"><span class="sr-only">Failure</span></span>Echec</span>');
                      $('#clientModal .message').css("color","red");
                      $('#clientModal .message .alert').css("text-align","center");
                      $('#clientModal .message').css("font-size","1.2em");
                     }
                 }

                });          
    });



   $(document).on('click','.updateuser',function(){
       
         var erreur_admin='';
         var erreur_login='';
         var erreur_mail='';
         var erreur_type='';
         var erreur_groupe='';
         
             if($.trim($('.addadministrateur').val())==''){
             erreur_admin='Entrez le nom de l\'utilisateur';
             $('.erreur-administrateur').text(erreur_admin);
             $('.erreur-administrateur').css('color', 'red');
              $('.addadministrateur').css('border-color', 'red');
             
         }else{
          erreur_admin='';
              $('.erreur-administrateur').text(erreur_admin);
              $('.addadministrateur').css('border-color', 'black');
         }
         
         if($.trim($('.addlogin').val())==''){
             erreur_login='Entrez le login de l\'utilisateur ';
             $('.erreur-login').text(erreur_login);
             $('.erreur-login').css('color', 'red');
              $('.addlogin').css('border-color', 'red');
             
         }else{
                erreur_login='';
              $('.erreur-login').text(erreur_login);
              $('.addlogin').css('border-color', 'black');
         }

         if($.trim($('.addgroupe').val())==''){
             erreur_groupe='choisissez le  role de l\'utilisateur ';
             $('.erreur-groupe').text(erreur_groupe);
             $('.erreur-groupe').css('color', 'red');
              $('.addgroupe').css('border-color', 'red');
             
         }else{
                erreur_groupe='';
              $('.erreur-groupe').text(erreur_groupe);
              $('.addgroupe').css('border-color', 'black');
         }
         
         if(erreur_admin!='' || erreur_login!=''|| erreur_groupe!=''){
             
             return false;
         }else{
            
          var formData = {
                   administrateur:  $('.addadministrateur').val(), login: $('.addlogin').val(), mail:$('.addmail').val(),
                   type:  $('.addtype').val(),groupe:$('.addgroupe').val(), id:$('.id_admin').val()
          };
        
                  
                  // DO POSTcontentType : "application/JSON",
                  $.ajax({
                  type : "POST",
                  
                  url :"<?php echo $this->baseUrl(); ?>/setting/admin/edit",
                  data : formData,
                  dataType : 'text',
                  success : function(result) {
                      
                    if(result=="ok")
                    alert("Utilisteur mis à jour");

                    //window.location.href="<?php //echo $this->baseUrl(); ?>/setting/admin/list";
                    else
                    alert("une erreur s'est produite lors de l'enregistrement");
                           
                    //console.log(result);
                  }
                });
                 
            
         }
       
      }); 




$(document).on("click",".newAdmin", function(){

    var newFor=' <form   class="row" id="newForm"    accept-charset="utf-8"> <div class="col-12 col-lg-12"><div class="form-group"> <label for="PostUsee" class="is-required">Nom et prenom </label> <input  class="form-control addadministrateur" type="text"  maxlength="255" value="" nom="administrateur" aria-required="true"       title="autor is empty"/> <span  class="erreur-administrateur"></span> </div> <div class="form-group"><label for="PostUser" class="is-required">Login </label> <input  class="form-control addlogin"  type="text" maxlength="255" value=""  nom="login" aria-required="true"  title="autor is empty"/> <span class="erreur-login" ></span> </div> <div class="form-group"> <label for="PostUser" class="">Mail </label> <input  class="form-control addmail"  type="email" maxlength="255" value=""  nom="mail"    title="autor is empty"/><span  class="erreur-mail"></span> </div> <div class="form-group">  <label for="PostUser" class="is-required">Role </label> <Select class="form-control addgroupe"  maxlength="255"     aria-required="true" >   <?php foreach($this->groupes as $g): ?> <option value="<?php echo $g['ID_GROUPE']; ?>"> <?php echo $g['GROUPE'] ;?></option>  <?php endforeach; ?>
    </Select> <span  class="erreur-groupe"></span></div> </div>  <div class="modal-footer"> <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>  <buttont  type="submit" class="btn btn-primary  submit" name="submit" >Ajouter </button> </div> </form>';
       $("#addModal #myModalLabel").text("Ajouter un nouvel utilisateur");
     $("#addModal .modal-body").html(newFor);
      $("#addModal").modal("show");
    });


    $(document).on('click','.submit',function(){
       
         var erreur_admin='';
         var erreur_login='';
         var erreur_mail='';
         var erreur_type='';
         var erreur_groupe='';
         
         
        
       
            
             if($.trim($('.addadministrateur').val())==''){
             erreur_admin='Entrez le nom de l\'utilisateur';
             $('.erreur-administrateur').text(erreur_admin);
             $('.erreur-administrateur').css('color', 'red');
              $('.addadministrateur').css('border-color', 'red');
             
         }else{
          erreur_admin='';
              $('.erreur-administrateur').text(erreur_admin);
              $('.addadministrateur').css('border-color', 'black');
         }
         
         if($.trim($('.addlogin').val())==''){
             erreur_login='Entrez le login de l\'utilisateur ';
             $('.erreur-login').text(erreur_login);
             $('.erreur-login').css('color', 'red');
              $('.addlogin').css('border-color', 'red');
             
         }else{
                erreur_login='';
              $('.erreur-login').text(erreur_login);
              $('.addlogin').css('border-color', 'black');
         }

         if($.trim($('.addgroupe').val())==''){
             erreur_groupe='choisissez le  role de l\'utilisateur ';
             $('.erreur-groupe').text(erreur_groupe);
             $('.erreur-groupe').css('color', 'red');
              $('.addgroupe').css('border-color', 'red');
             
         }else{
                erreur_groupe='';
              $('.erreur-groupe').text(erreur_groupe);
              $('.addgroupe').css('border-color', 'black');
         }
         
         if(erreur_admin!='' || erreur_login!=''|| erreur_groupe!=''){
             
             return false;
         }else{
            
          var formData = {
                   administrateur:  $('.addadministrateur').val(), login: $('.addlogin').val(), mail:$('.addmail').val(),
                   type:  $('.addtype').val(),groupe:$('.addgroupe').val()
          };
        
                  
                  // DO POSTcontentType : "application/JSON",
                  $.ajax({
                  type : "POST",
                  
                  url :"<?php echo $this->baseUrl(); ?>/setting/admin/add",
                  data : formData,
                  dataType : 'text',
                  success : function(result) {
                      
                    if(result=="ok")
                    alert("Utilisteur bien enregistré");

                    //window.location.href="<?php //echo $this->baseUrl(); ?>/setting/admin/list";
                    else        
                    alert("une erreur s'est produite lors de l'enregistrement");
                           
                    //console.log(result);
                  }
                });
                 
            
         }
       
      }); 
        
    }); 
  
  
    </script>
